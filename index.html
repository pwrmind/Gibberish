<!DOCTYPE html>
<!-- saved from url=(0043)http://www.alekseybabanov.ru/gibberish.html -->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
        <title>gibberish</title>
        <script src="js/angular.min.js"></script>
        <style>
            body {
                font-family: Arial,Helvetica,sans-serif;
                font-size: 14px;
            }
        </style>
    </head>
<body ng-app="gibberishApp">
    <script>
      /*
      В русском языке 10 гласных букв (а, у, о, ы, и, э, я, ю, ё, е)
      и 21 согласная буква (б, в, г, д, ж, з, й, к, л, м, н, п, р, с, т, ф, х, ц, ч, ш, щ).
      Звонкими являются следующие буквы: б, в, г, д, ж, з, й, л, м, н, р.
      Глухие буквы: к, п, с, т, ф, х, ц, ч, ш, щ.
      */
        var gibberishApp = angular.module('gibberishApp', []);

        gibberishApp.controller('TranslatorCtrl', function TranslatorCtrl($scope) {
            $scope.text = localStorage.getItem("text") || "";
            $scope.gibberish = localStorage.getItem("gibberish") || "";
            $scope.gibberishLength = 0;
            $scope.change = function() {
                $scope.gibberish = $scope.text
                  .replace(/бо/g,"б\u030C")
                  .replace(/во/g,"в\u030C")
                  .replace(/го/g,"г\u030C")
                  .replace(/до/g,"д\u030C")
                  .replace(/жо/g,"ж\u030C")
                  .replace(/зо/g,"з\u030C")
                  .replace(/ко/g,"к\u030C")
                  .replace(/ло/g,"л\u030C")
                  .replace(/мо/g,"м\u030C")
                  .replace(/но/g,"н\u030C")
                  .replace(/по/g,"п\u030C")
                  .replace(/ро/g,"р\u030C")
                  .replace(/со/g,"с\u030C")
                  .replace(/то/g,"т\u030C")
                  .replace(/фо/g,"ф\u030C")
                  .replace(/хо/g,"х\u030C")
                  .replace(/цо/g,"ц\u030C")
                  .replace(/чо/g,"ч\u030C")
                  .replace(/шо/g,"ш\u030C")
                  .replace(/що/g,"щ\u030C")
                  //е
                  .replace(/бе/g,"б\u0308")
                  .replace(/ве/g,"в\u0308")
                  .replace(/ге/g,"г\u0308")
                  .replace(/де/g,"д\u0308")
                  .replace(/же/g,"ж\u0308")
                  .replace(/зе/g,"з\u0308")
                  .replace(/ке/g,"к\u0308")
                  .replace(/ле/g,"л\u0308")
                  .replace(/ме/g,"м\u0308")
                  .replace(/не/g,"н\u0308")
                  .replace(/пе/g,"п\u0308")
                  .replace(/ре/g,"р\u0308")
                  .replace(/се/g,"с\u0308")
                  .replace(/те/g,"т\u0308")
                  .replace(/фе/g,"ф\u0308")
                  .replace(/хе/g,"х\u0308")
                  .replace(/це/g,"ц\u0308")
                  .replace(/че/g,"ч\u0308")
                  .replace(/ше/g,"ш\u0308")
                  .replace(/ще/g,"щ\u0308")
                  //и
                  .replace(/би/g,"б\u0307")
                  .replace(/ви/g,"в\u0307")
                  .replace(/ги/g,"г\u0307")
                  .replace(/ди/g,"д\u0307")
                  .replace(/жи/g,"ж\u0307")
                  .replace(/зи/g,"з\u0307")
                  .replace(/ки/g,"к\u0307")
                  .replace(/ли/g,"л\u0307")
                  .replace(/ми/g,"м\u0307")
                  .replace(/ни/g,"н\u0307")
                  .replace(/пи/g,"п\u0307")
                  .replace(/ри/g,"р\u0307")
                  .replace(/си/g,"с\u0307")
                  .replace(/ти/g,"т\u0307")
                  .replace(/фи/g,"ф\u0307")
                  .replace(/хи/g,"х\u0307")
                  .replace(/ци/g,"ц\u0307")
                  .replace(/чи/g,"ч\u0307")
                  .replace(/ши/g,"ш\u0307")
                  .replace(/щи/g,"щ\u0307")
                  //а
                  .replace(/ба/g,"б\u0302")
                  .replace(/ва/g,"в\u0302")
                  .replace(/га/g,"г\u0302")
                  .replace(/да/g,"д\u0302")
                  .replace(/жа/g,"ж\u0302")
                  .replace(/за/g,"з\u0302")
                  .replace(/ка/g,"к\u0302")
                  .replace(/ла/g,"л\u0302")
                  .replace(/ма/g,"м\u0302")
                  .replace(/на/g,"н\u0302")
                  .replace(/па/g,"п\u0302")
                  .replace(/ра/g,"р\u0302")
                  .replace(/са/g,"с\u0302")
                  .replace(/та/g,"т\u0302")
                  .replace(/фа/g,"ф\u0302")
                  .replace(/ха/g,"х\u0302")
                  .replace(/ца/g,"ц\u0302")
                  .replace(/ча/g,"ч\u0302")
                  .replace(/ша/g,"ш\u0302")
                  .replace(/ща/g,"щ\u0302");
              
              $scope.gibberishLength = $scope.gibberish.replace(/\u030C/g,"").replace(/\u0307/g,"").replace(/\u0308/g,"").replace(/\u0302/g,"").length;
              localStorage.setItem("text", $scope.text);
              localStorage.setItem("gibberish", $scope.gibberish);
            };
        });
    </script>
    
    <div ng-controller="TranslatorCtrl">
        <div>
            <h2>Вставьте или введите текст:</h2>
            <textarea name="text" id="text" cols="60" rows="3" ng-model="text" ng-change="change()"></textarea>
        </div>
        <div>
            <h2>Тарабарщина:</h2>
            <span id="gibberish"> {{ gibberish }} </span>
        </div>
        <h3>Статистика:</h3>
        <div> {{ text.length }} - {{ gibberishLength }} = {{ text.length - gibberishLength }} <div>
        <div>% {{ gibberishLength }} * 100 : {{ text.length }} = {{ gibberishLength * 100 / text.length }} <div>
        <h3>Разшифровка:</h3>
        <table>
          <tr>
            <td>б&#780; бо </td>
          </tr>
          <tr>
            <td>б&#776; бе</td>
          </tr>
          <tr>
            <td>б&#775; би</td>
          </tr>
          <tr>
            <td>б&#770; ба</td>
          </tr>
        </table>
    </div>
</body>
</html>