<!DOCTYPE html>
<!-- saved from url=(0043)http://www.alekseybabanov.ru/gibberish.html -->
<html>
    <head>
        <meta charset="utf-8">
        <title>gibberish</title>
        <script src="js/angular.min.js"></script>
        <style>
            body {
                font-family: monospace;
                font-size: 14px;
            }
        </style>
    </head>
<body ng-app="gibberishApp">
    <script>
      /*
      В русском языке 10 гласных букв (а, у, о, ы, и, э, я, ю, ё, е)
      и 21 согласная буква (б, в, г, д, ж, з, й, к, л, м, н, п, р, с, т, ф, х, ц, ч, ш, щ).
      Звонкими являются следующие буквы: б, в, г, д, ж, з, й, л, м, н, р.
      Глухие буквы: к, п, с, т, ф, х, ц, ч, ш, щ.
      */
        var gibberishApp = angular.module('gibberishApp', []);

        gibberishApp.controller('TranslatorCtrl', function TranslatorCtrl($scope) {
            $scope.text = localStorage.getItem("text") || "";
            $scope.gibberish = localStorage.getItem("gibberish") || "";
            $scope.gibberishLength = 0;
            $scope.change = function() {
                $scope.gibberish = $scope.text
                  .replace(/бо/g,"\u030Cб")
                  .replace(/во/g,"\u030Cв")
                  .replace(/го/g,"\u030Cг")
                  .replace(/до/g,"\u030Cд")
                  .replace(/жо/g,"\u030Cж")
                  .replace(/зо/g,"\u030Cз")
                  .replace(/ко/g,"\u030Cк")
                  .replace(/ло/g,"\u030Cл")
                  .replace(/мо/g,"\u030Cм")
                  .replace(/но/g,"\u030Cн")
                  .replace(/по/g,"\u030Cп")
                  .replace(/ро/g,"\u030Cр")
                  .replace(/со/g,"\u030Cс")
                  .replace(/то/g,"\u030Cт")
                  .replace(/фо/g,"\u030Cф")
                  .replace(/хо/g,"\u030Cх")
                  .replace(/цо/g,"\u030Cц")
                  .replace(/чо/g,"\u030Cч")
                  .replace(/шо/g,"\u030Cш")
                  .replace(/що/g,"\u030Cщ")
                  //е
                  .replace(/бе/g,"\u0308б")
                  .replace(/ве/g,"\u0308в")
                  .replace(/ге/g,"\u0308г")
                  .replace(/де/g,"\u0308д")
                  .replace(/же/g,"\u0308ж")
                  .replace(/зе/g,"\u0308з")
                  .replace(/ке/g,"\u0308к")
                  .replace(/ле/g,"\u0308л")
                  .replace(/ме/g,"\u0308м")
                  .replace(/не/g,"\u0308н")
                  .replace(/пе/g,"\u0308п")
                  .replace(/ре/g,"\u0308р")
                  .replace(/се/g,"\u0308с")
                  .replace(/те/g,"\u0308т")
                  .replace(/фе/g,"\u0308ф")
                  .replace(/хе/g,"\u0308х")
                  .replace(/це/g,"\u0308ц")
                  .replace(/че/g,"\u0308ч")
                  .replace(/ше/g,"\u0308ш")
                  .replace(/ще/g,"\u0308щ")
                  //и
                  .replace(/би/g,"\u0307б")
                  .replace(/ви/g,"\u0307в")
                  .replace(/ги/g,"\u0307г")
                  .replace(/ди/g,"\u0307д")
                  .replace(/жи/g,"\u0307ж")
                  .replace(/зи/g,"\u0307з")
                  .replace(/ки/g,"\u0307к")
                  .replace(/ли/g,"\u0307л")
                  .replace(/ми/g,"\u0307м")
                  .replace(/ни/g,"\u0307н")
                  .replace(/пи/g,"\u0307п")
                  .replace(/ри/g,"\u0307р")
                  .replace(/си/g,"\u0307с")
                  .replace(/ти/g,"\u0307т")
                  .replace(/фи/g,"\u0307ф")
                  .replace(/хи/g,"\u0307х")
                  .replace(/ци/g,"\u0307ц")
                  .replace(/чи/g,"\u0307ч")
                  .replace(/ши/g,"\u0307ш")
                  .replace(/щи/g,"\u0307щ")
                  //а
                  .replace(/ба/g,"\u0302б")
                  .replace(/ва/g,"\u0302в")
                  .replace(/га/g,"\u0302г")
                  .replace(/да/g,"\u0302д")
                  .replace(/жа/g,"\u0302ж")
                  .replace(/за/g,"\u0302з")
                  .replace(/ка/g,"\u0302к")
                  .replace(/ла/g,"\u0302л")
                  .replace(/ма/g,"\u0302м")
                  .replace(/на/g,"\u0302н")
                  .replace(/па/g,"\u0302п")
                  .replace(/ра/g,"\u0302р")
                  .replace(/са/g,"\u0302с")
                  .replace(/та/g,"\u0302т")
                  .replace(/фа/g,"\u0302ф")
                  .replace(/ха/g,"\u0302х")
                  .replace(/ца/g,"\u0302ц")
                  .replace(/ча/g,"\u0302ч")
                  .replace(/ша/g,"\u0302ш")
                  .replace(/ща/g,"\u0302щ");
              
              $scope.gibberishLength = $scope.gibberish.replace(/\u030C/g,"").replace(/\u0307/g,"").replace(/\u0308/g,"").replace(/\u0302/g,"").length;
              localStorage.setItem("text", $scope.text);
              localStorage.setItem("gibberish", $scope.gibberish);
            };
        });
    </script>
    
    <div ng-controller="TranslatorCtrl">
        <div>
            <h2>Вставьте или введите текст:</h2>
            <textarea name="text" id="text" cols="60" rows="3" ng-model="text" ng-change="change()"></textarea>
        </div>
        <div>
            <h2>Тарабарщина:</h2>
            <span id="gibberish"> {{ gibberish }} </span>
        </div>
        <h3>Статистика:</h3>
        <div> {{ text.length }} - {{ gibberishLength }} = {{ text.length - gibberishLength }} <div>
        <div>% {{ gibberishLength }} * 100 : {{ text.length }} = {{ gibberishLength * 100 / text.length }} <div>
        <h3>Разшифровка:</h3>
        <table>
          <tr>
            <td>&#780;б - бо </td>
          </tr>
          <tr>
            <td>&#776;б - бе</td>
          </tr>
          <tr>
            <td>&#775;б - би</td>
          </tr>
          <tr>
            <td>&#770;б - ба</td>
          </tr>
        </table>
    </div>
</body>
</html>